#Призматик для Android
*В этом документе описаны особенности работы и опции приложения Призматик для операционной системы Андроид. Если вы уже ознакомились с принципами работы устройства, то наверняка большинство вопросов по использованию Призматика отпало само собой. В любом случае мы постарались описать все настройки предельно коротко и ясно, снабдив скриншотами все важные места.*

----------------------
*Содержание:*
* [Главный экран и индикация](#Главный-экран-и-индикация)
* [Настройки режимов](#Настройки-режимов)
  * [Лампа подсветки (Solid color)](#Лампа-подсветки-solid-color)
  * [Переливающаяся подсветка (Mood lamp)](#Переливающаяся-подсветка-mood-lamp)
  * [Захват картинки (Screen capturing)](#Захват-картинки-screen-capturing)
* [Настройки устройства](#Настройки-устройства)
  * [Настройка зон захвата](#Настройка-зон-захвата)
  * [Настройка баланса белого](#Настройка-баланса-белого)
  * [Область уведомлений](#Область-уведомлений)
  
Призматик для Андроида (Prismatik of Lightpack) -- приложение для захвата картинки из ОС Андроид предназначенное в первую очередь для работы с HDMI-стиками и медиа-центрами на базе этой ОС, число которых с каждым днём растёт. Приложение в полной мере работает с Лайтпаком (включая сетапы с несколькими устройствами), имеет простой интерфейс оптимизированный для отображения на экранах с большими диагоналями и FullHD разрешениями. Помимо стандартных способов ввода Призматик адаптирован для управления геймпадом. На сегодняшний день интерфейс приложения доступен только на английском языке.
> **Требования и особенности:**
> 
> - Android 4.0 и новее
> - Приложению потребуются права суперпользователя (Root) для работы режима захвата картинки
> - В некоторых случаях при включенном аппаратном рендеринге захват может не работать при проигрывании файлов определённых форматов.

###Главный экран и индикация

Главный экран Призматика содержит минимальный набор наиболее частоиспользуемых контролов и предоставляет пользователю всю необходимую информацию о сетапе, статусе Лайтпака, выбранном режиме и пр.

![Главный экран][1]

Логотип в верхней части экрана подсвечивается в зависимости от выбранного режима работы и выполнен монохромным в случае, если подсветка отключена. В нижнюю половину экрана под кнопки переключения режимов выводится информация о количестве подключенных и распознанных Лайтпаков и доступности прав суперпользователя (Root), необходимых для работы режима захвата.

Настройки режимов
------------------------
Призматик имеет 3 режима работы: Простая лампа подсветки (Solid color), Переливающаяся подсветка (Mood lamp) и режим захвата картинки (Screen capturing). Каждый из них активируется нажатием на соответствующую кнопку. Выключить подсветку из главного окна можно просто "отжав" кнопку соотствующего режима обратно. Специфические для каждого режима настройки доступны на всплывающей снизу шторке (drawer), которая активируется в момент включения любого режима и которую всегда можно свернуть.

### Лампа подсветки (Solid color)
В этом режиме Лайтпак светит одним единственным цветом, который пользователь выбрал в настройках. Помимо цвета доступны регулировки каналов его насыщенности (saturation) и яркости (lightness) . Компонент выбора цвета выполнен согласно модели цветового представления [HSL][2] для отображения полного спектра доступных цветов.

![Настройки лампы подсветки][3]

### Переливающаяся подсветка (Mood lamp)
В этом режиме Лайтпак плавно изменяет свой цвет. Доступна регулировка скорости изменения. Так же в этом режиме у пользователя есть возможность запустить одну из предустановленных "анимаций" подсветки и отрегулировать её скорость.
> **Внимание:**
> 
> Для правильной работы некоторых из анимаций, например Cylon необходимо чтобы зоны захвата были предварительно настроены (см. Зоны захвата)

![Настройки переливающейся подсветки][4]

### Захват картинки (Screen capturing)
В режиме захвата картинки Призматик захватывает и анализирует любой выводимый на экран контент, включая интерфейс самой ОС. Это основной сценарий использования устройства, но для его работы необходимо иметь права суперпользователя (Root). После включения режима захвата  Призматик можно "свернуть" любым удобным способом. Серверная часть, обеспечивающая захват будет работать независимо от GUI, а Лайтпак начнёт подсвечивать стену цветами из вашей игры, или видео. Для правильной работы режима необходимо предварительно настроить зоны захвата.

![Настройки захвата][5]

В режиме захвата доступны 3 дополнительные опции: Лимит кадров в секунду (FPS limit), Супер-фича заботящаяся о вашем зрении (Magic eye-saving feature), Средний цвет по сцене (Scene overall color).

#### Лимит кадров в секунду (FPS limit)
Позволяет установить верхнюю планку, которая ограничивает скорость захвата картинки. Настройка полезна в случае, если устройство, на котором запущен Призматик, обладает избыточной производительностью.

#### Супер-фича про глаза (magic eye-saving feature)
Опция отвечает за дополнительный алгоритм постобработки картинки. В отличие от обычного режима захвата, который предполагает полное отключение подстветки на чёрных сценах, с этой опцией светодиодные модули никогда не будут гаснуть полностью. В случае, если какая-то часть вашего экрана темнеет до черноты, соответствуещие ей модули будут светиться тусклым светом используя средний цвет из тех областей картинки, где он присутствует. Если с включенной опцией вывести на экран полностью чёрную картинку, то Лайтпак подстветит стену тусклым белым светом. Мы рекомендуем всегда держать этот переключатель включёным.

#### Средний цвет по сцене (Scene overall color)
Эта опция обеспечивает наиболее ровную и не отвлекающую от происходящего на экране, подсветку. После анализа картинки на все светодиодные модули отправляется один(!) средний цвет по сцене. Разумеется с этой опцией корректность настройки зон захвата не важна.

Настройки устройства
---------------------
Сразу после установки Лайтпака на экран и инсталляции Призматика мы рекомендуем настроить устройство. Основная процедура -- настройка зон захвата. Она необходима из-за того, что на начальном этапе ни Лайтпак ни Призматик "не знают" как вы расположили светодиодные модули относительно экрана. Им не известен порядок, рисунок и даже кол-во модулей, которые вы использовали. 

### Настройка зон захвата

Настройка зон захвата предполагает сопоставление конкретной части картинки с экрана конкретному светодиодному модулю Лайтпака. Эту настройку нужно произвести лишь единожды, после чего она будет записана в профиль Призматика.

Если перед установкой устройства на экран вы разворачивали Quick Install Guide Лайтпака, то знаете, что для упрощения настройки зон мы предлагаем использовать систему "созвездий". Фактически мы предлагаем использовать одно из трёх наиболее популярных размещений модулей на экранах и, если вы установите Лайтпак согласно этим иллюстрациям, то дальнейшая настройка зон в Призматике сведётся к нажатию одной кнопки.

![Созвездия][6]

Существует три основных созвездия которые поддерживаются Призматиком. Они актуальны как для настольной версии софта, так и для приложения Android:

1. Андромеда
2. Кассиопея
3. Пегас

Настройка зон выполняется на соответствующем экране доступном из списка после клика на кнопку с шестернёй в главном экране Призматика. В случае, если вы использовали какое-то из созвездий, настроить зоны можно просто нажав на соответствующую кнопку и сохранив получившийся рисунок зон.

![Настройка зон][7]

В случае, если вы не использовали систему созвездий и хотите настроить зоны вручную, сделать это не намного сложнее. Процесс прост и итеративен: Круги с номерами на экране соотвествуют светодиодным модулям. Ваша задача выбрать один из кругов (зону захвата), после чего соответствующий ей светодиодный модуль Лайтпака начнёт переливаться. Затем нужно переместить зону как можно ближе к горящему светодиодныму модулю. После чего повторить процедуру столько раз, сколько светодиодных модулей у вас подключено.

Проверить корректность получившегося рисунка зон всегда можно запустив тестовое видео. Не забудьте сохранить настройки перед возвратом на главный экран.

### Настройка баланса белого
Баланс белого -- это калибровка, которая необходима в некоторых случаях чтобы скомпенсировать отклонение в цветопередаче светодиодов или подстроить вывод под конкретную стену, которая наверняка не является идельно белой. В подавляющем большинстве случаев этой процедурой можно пренебречь, однако иногда эффект после настройки баланса в значительной мере улучшает ощущения от подсветки.

Настройка выполняется путём поканальной (RGB) регулировки относительно нулевого значения (убавить/добавить к свечению красного/синего/зелёного) и одинаково влияет на все светодиодные модули. Настроить конкретный модуль относительно остальных не получится (такая функция присутствует только в настольном Призматике).

Область уведомлений
-------------------
В случае, если вы используете стандартный лаунчер на вашем Android устройстве, вам должна понравиться возможность управлять Лайтпаком прямо из области уведомлений (notification drawer).

![Область уведомлений][8]

Через область нотификации вы можете включать и выключать подсветку (при этом будет использоваться последний выбранный вами режим) и выгружать приложение из памяти.

  [1]: http://store.pixelkit.ru/img/Prismatik/PA-main-en.jpg
  [2]: http://en.wikipedia.org/wiki/HSL_and_HSV
  [3]: http://store.pixelkit.ru/img/Prismatik/PA-solid-en.jpg
  [4]: http://store.pixelkit.ru/img/Prismatik/PA-mood-en.jpg
  [5]: http://store.pixelkit.ru/img/Prismatik/PA-grab-en.jpg
  [6]: http://store.pixelkit.ru/img/Prismatik/PA-const-en.jpg
  [7]: http://store.pixelkit.ru/img/Prismatik/PA-zones-en.jpg
  [8]: http://store.pixelkit.ru/img/Prismatik/PA-notif-en.jpg
